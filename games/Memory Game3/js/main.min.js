function e(a){a=a.slice();for(let c=a.length-1;0<c;c--){const b=Math.floor(Math.random()*(c+1));[a[c],a[b]]=[a[b],a[c]]}return a}function f(a,c,b){a=document.createElement(a);a.className=c;a.innerHTML=b;return a}function g(a){const c=[];for(let b=0;b<a.j.length;b++){const d=a.j.key(b);d.includes("time-peaceonearth")&&c.push(a.j.getItem(d))}c.sort((b,d)=>b.localeCompare(d));return c}
function h(a){a.g.data.length&&(a.message.innerHTML+="<h3>Best score: "+a.g.data.shift()+"</h3>");0<a.g.data.length&&(a.message.innerHTML+="<h3>Other scores: "+a.g.data.join(", ")+"</h3>")}
function l(a,c){const b=c.target;if(b.classList.contains("korta")&&(a.g.i||(a.g.m=c.target),2!==a.g.i)){++a.g.i;var d=.5<=Math.round(Math.random())?"pasukti":"pasukti1";b.className+=" "+d;if(2===a.g.i)if(a.g.h+=1,a.h.innerHTML=a.g.h,a.l.style.pointerEvents="none",a.g.m.firstChild.className===b.firstChild.className)setTimeout(()=>{b.classList.add("blur");a.g.m.classList.add("blur");a.g.i=0;a.l.style.pointerEvents="auto";a.l.getElementsByClassName("blur").length===a.u.length&&(clearInterval(a.g.s),
a.message.innerHTML=`<h2>Your time: ${a.D.textContent}</h2>`,a.j.setItem(`time-${"peaceonearth"}${a.j.length}`,a.D.textContent),a.g.data=g(a),h(a),a.l.innerHTML="",a.button("Play again"),a.message.style.display="block",a.g.h=0)},300);else{let k=setTimeout(()=>{clearTimeout(k);k=0;b.classList.remove(d);a.g.m.className="korta";a.g.i=0;a.l.style.pointerEvents="auto"},900)}}}function m(a){a.g.data=g(a);h(a);a.button("Start")}
class n{constructor(){this.j=window.localStorage;this.o="abcdefgjkl".split("");this.u=e(this.o.concat(this.o));this.v=document.createDocumentFragment();this.l=document.getElementById("grid-container");this.message=document.getElementById("message");document.getElementById("notice");this.C=document.getElementById("statistics");this.D=document.getElementById("timers");this.h=document.getElementById("clicks");this.A=document.getElementById("minutes");this.B=document.getElementById("seconds");this.g=
{s:0,data:null,m:null,h:0,i:0}}s(){function a(b){return 9<b?String(b):"0"+b}let c=0;this.g.s=setInterval(()=>{this.B.innerHTML=a(++c%60);this.A.innerHTML=a(parseInt(c/60,10))},1E3)}button(a){this.C.classList.add("hidden");a=f("button","btn",a);a.onclick=()=>{this.start();this.message.style.display="none";this.C.classList.remove("hidden")};this.message.appendChild(a)}start(){this.j.setItem("visitor-peaceonearth","1");this.u=e(this.o.concat(this.o));this.u.forEach(a=>{const c=f("DIV","wrpko",""),b=
f("DIV","korta","");a=f("DIV","galas "+a,"");const d=f("DIV","priekis","");c.appendChild(b).appendChild(a);b.appendChild(d);this.v.appendChild(c)});this.l.appendChild(this.v);this.s();this.A.innerHTML=this.B.innerHTML="00";this.h.innerHTML=this.g.h}}document.addEventListener("DOMContentLoaded",()=>{const a=new n;m(a);document.addEventListener("click",c=>{l(a,c)})});
