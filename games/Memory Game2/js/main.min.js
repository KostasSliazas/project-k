function e(a){a=a.slice();for(let b=a.length-1;0<b;b--){const c=Math.floor(Math.random()*(b+1));[a[b],a[c]]=[a[c],a[b]]}return a}function k(a,b,c){a=document.createElement(a);a.className=b;a.innerHTML=c;return a}function l(a){const b=[];for(let c=0;c<a.j.length;c++){const d=a.j.key(c);d.includes("time-peaceonearth")&&b.push(a.j.getItem(d))}b.sort((c,d)=>c.localeCompare(d));return b}
function m(a){a.g.data.length&&(a.message.innerHTML+="<h3>Best score: "+a.g.data.shift()+"</h3>");0<a.g.data.length&&(a.message.innerHTML+="<h3>Other scores: "+a.g.data.join(", ")+"</h3>")}
function n(a,b){const c=b.target;if(c.classList.contains("korta")&&(a.g.i||(a.g.m=b.target),2!==a.g.i)){++a.g.i;var d=.5<=Math.round(Math.random())?"pasukti":"pasukti1";c.className+=" "+d;if(2===a.g.i)if(a.g.h+=1,a.h.innerHTML=a.g.h,a.l.style.pointerEvents="none",a.g.m.firstChild.className===c.firstChild.className)setTimeout(()=>{c.classList.add("blur");a.g.m.classList.add("blur");a.g.i=0;a.l.style.pointerEvents="auto";a.l.getElementsByClassName("blur").length===a.u.length&&(clearInterval(a.g.s),
a.message.innerHTML=`<h2>Your time: ${a.D.textContent}</h2>`,a.j.setItem(`time-${"peaceonearth"}${a.j.length}`,a.D.textContent),a.g.data=l(a),m(a),a.l.innerHTML="",a.button("Play again"),a.message.style.display="block",a.g.h=0)},300);else{let f=setTimeout(()=>{clearTimeout(f);f=0;c.classList.remove(d);a.g.m.className="korta";a.g.i=0;a.l.style.pointerEvents="auto"},900)}}}
class p{constructor(){this.j=window.localStorage;this.o="abcdefgjkl".split("");this.u=e(this.o.concat(this.o));this.v=document.createDocumentFragment();this.l=document.getElementById("grid-container");this.message=document.getElementById("message");document.getElementById("notice");this.C=document.getElementById("statistics");this.D=document.getElementById("timers");this.h=document.getElementById("clicks");this.A=document.getElementById("minutes");this.B=document.getElementById("seconds");this.F=
document.getElementById("spn");this.g={s:0,data:null,m:null,h:0,i:0}}s(){function a(c){return 9<c?String(c):"0"+c}let b=0;this.g.s=setInterval(()=>{this.B.innerHTML=a(++b%60);this.A.innerHTML=a(parseInt(b/60,10))},1E3)}button(a){this.C.classList.add("hidden");a=k("button","btn",a);a.onclick=()=>{this.start();this.message.style.display="none";this.C.classList.remove("hidden")};this.message.appendChild(a)}start(){this.j.setItem("visitor-peaceonearth","1");this.u=e(this.o.concat(this.o));this.u.forEach(a=>
{const b=k("DIV","wrpko",""),c=k("DIV","korta","");a=k("DIV","galas "+a,"");const d=k("DIV","priekis","");b.appendChild(c).appendChild(a);c.appendChild(d);this.v.appendChild(b)});this.l.appendChild(this.v);this.s();this.A.innerHTML=this.B.innerHTML="00";this.h.innerHTML=this.g.h}}
document.addEventListener("DOMContentLoaded",()=>{const a=new p;(function(...b){function c(q){var g=new Image;g.onload=function(){f++;f===b.length&&(a.F.className="hidden",a.g.data=l(a),m(a),a.button("Start"))};g.src=q;d.push(g)}for(var d=[],f=0,h=0;h<b.length;h++)c(b[h])})("img/01.svg","img/02.svg","img/03.svg","img/04.svg","img/05.svg","img/06.svg","img/07.svg","img/08.svg","img/09.svg","img/10.svg");document.addEventListener("click",b=>{n(a,b)})});
