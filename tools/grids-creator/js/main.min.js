!function(d){"use strict";const reg=new RegExp("(?!0)[d]+","g"),checkForDefined=element=>null!=element,element=(tagName,...attributes)=>{const newElement=document.createElement(tagName);for(let i=0;i<attributes.length;i+=2)newElement.setAttribute(attributes[i],attributes[i+1]);return newElement},delay=ms=>new Promise(resolve=>setTimeout(resolve,ms)),addLeadingZero=time=>time.toString().length<2?"0"+time:time,counters=d.querySelectorAll(".counter"),getElem=e=>e.querySelector("input"),counter={min:1,max:100,number:0,numberMinus1(){return this.number-1},numberPlus1(){return this.number+1},set numbers(number){number>Math.abs(this.max||number<this.min)||(this.number=number)},get numbers(){return this.number}};Object.seal(counter);const saveAllInputs=()=>{const values=Array.from(counters,counter=>getElem(counter).value);localStorage.setItem("TableMaker-InputValues",values.join(","))};let isSaving=!1;async function setItems(element){isSaving||(isSaving=!0,element.classList.add("saved"),await delay(500),await saveAllInputs(),element.classList.remove("saved"),isSaving=!1)}const hightLight=async element=>{element.classList.add("max"),await delay(200),element.classList.remove("max")},increase=e=>{const{target:target}=e;if("BUTTON"!==target.tagName)return;const{currentTarget:currentTarget}=e,inputElement=getElem(currentTarget);if(counter.numbers=parseInt(inputElement.value),"â€”"===target.textContent){if(!((inputElement.min||counter.min)<counter.numbers))return hightLight(target);counter.numbers=inputElement.value=addLeadingZero(counter.numberMinus1())}if("+"===target.textContent){if(!(parseInt(inputElement.max||counter.max)>counter.numbers))return hightLight(target);counter.numbers=inputElement.value=addLeadingZero(counter.numberPlus1())}setItems(currentTarget.parentElement)},inputChange=e=>{const{target:target}=e;isNaN(parseInt(target.value))||(Math.max(parseInt(target.min))||counter.min)>parseInt(target.value)?target.value=target.min||counter.min:(Math.max(parseInt(target.max))||counter.max)<parseInt(target.value)?target.value=target.max||counter.max:target.value=addLeadingZero(target.value),setItems(target.parentElement)},values=localStorage.getItem("TableMaker-InputValues")&&localStorage.getItem("TableMaker-InputValues").split(",").map(Number=>addLeadingZero(Number)),countersLength=counters.length;for(let i=0;i<countersLength;i++){const counter=counters[i],inputElement=getElem(counter);inputElement.value=values&&values[i]||inputElement.value||inputElement.min||1,counter.addEventListener("click",e=>{increase(e),createTable(e)}),inputElement.addEventListener("change",e=>{inputChange(e),createTable(e)})}const cssOutput=d.getElementById("css-output"),htmlOutput=d.getElementById("html-output"),tableOutput=d.getElementsByClassName("table")[0],gap=d.getElementById("gap"),inputClear=d.getElementById("input-clear"),textCenter=d.getElementById("text-center"),autoCell=d.getElementById("fr-columns"),tableNumbersY=d.getElementById("table-numbers-y"),tableNumbersX=d.getElementById("table-numbers-x"),tableNumbers=d.getElementById("table-numbers"),numberingStart=d.getElementById("numbering-start"),c1=d.getElementById("c1-class"),c2=d.getElementById("c2-class"),isChecked=e=>void 0!==e&&!0===e.checked;function createTable(){tableOutput.innerHTML="",isChecked(textCenter)&&(tableOutput.style.textAlign="center");const rows=parseInt(d.getElementById("rows").value.replace(reg)),columns=parseInt(d.getElementById("columns").value.replace(reg)),total=rows*columns;for(let i=0;i<total;i++){const elem=element("i");tableOutput.appendChild(elem)}if(tableOutput.style.gridTemplateColumns="repeat("+columns+", minmax(1em,auto))",tableOutput.style.gridTemplateRows="repeat("+rows+", minmax(1em,auto))",gaps(),isChecked(tableNumbersY)&&numberingY(1),isChecked(tableNumbersX)&&numberingX(1,0),isChecked(tableNumbers)&&numberingX(1,1),isChecked(autoCell)){const rows=parseInt(d.getElementById("rows").value.replace(reg)),columns=parseInt(d.getElementById("columns").value.replace(reg));tableOutput.style.gridTemplateColumns="repeat("+columns+", 1fr)",tableOutput.style.gridTemplateRows="repeat("+rows+", 1fr)",tableOutput.style.maxWidth="initial"}}let lastText="";const elementSelected={element:null},mainInput=element("div","class","center hidden"),mainInside=element("form","class","inside"),cellInputLabel=element("label","for","input-text"),cellInput=element("input","id","input-text","type","text"),cellInputTitle=element("label","for","input-title"),cellTitle=element("input","id","input-title","type","text"),cellInputClass=element("label","for","input-class"),cellClass=element("input","id","input-class","type","text"),cellButton=element("input","id","input-button","type","submit","value","OK","class","hidden");cellInputLabel.textContent="Text",cellInputTitle.textContent="Title",cellInputClass.textContent="Class Name",mainInside.appendChild(cellInputLabel),mainInside.appendChild(cellInput),mainInside.appendChild(cellInputClass),mainInside.appendChild(cellClass),mainInside.appendChild(cellInputTitle),mainInside.appendChild(cellTitle),mainInside.appendChild(cellButton),mainInput.appendChild(mainInside),document.body.appendChild(mainInput),mainInside.onsubmit=e=>(cellInput.value.trim()&&(elementSelected.element.textContent=cellInput.value.trim()),cellClass.value.trim()&&(elementSelected.element.className=cellClass.value.trim()),cellTitle.value.trim()&&(elementSelected.element.title=cellTitle.value.trim()),e.target.parentElement.classList.add("hidden"),e.preventDefault(),!1);const clickType={double:!1};function gaps(){const gaps=parseInt(gap.value.replace(reg))+"px";tableOutput.style.gap=gaps,tableOutput.style.padding=gaps}function numberingY(e){const tableCells=tableOutput.childNodes;let countColum=parseInt(d.getElementById("columns").value.replace(reg)),countRow=parseInt(d.getElementById("rows").value.replace(reg));for(let i=tableCells.length-1;i>=0;i--)countColum--,0===countColum&&(countColum=parseInt(d.getElementById("columns").value.replace(reg)),tableCells[i].textContent=e?countRow:"",countRow--)}function numberingX(e,all){const tableCells=tableOutput.childNodes,countColum=parseInt(d.getElementById("columns").value.replace(reg)),whatToFill=all?tableCells.length:countColum,startPoint=parseInt(numberingStart.value.replace(reg))||1;for(let i=whatToFill-1;i>=0;i--){const z=startPoint+i;tableCells[i].textContent=e?z:""}}function merge(){const countColum=parseInt(d.getElementById("columns").value.replace(reg));let countColumIncrease=countColum;const tableCells=tableOutput.childNodes,duplicates={duplicate:"",count:1};for(let i=tableCells.length-1;i>=0;i--)0===countColumIncrease&&(countColumIncrease=countColum),countColumIncrease--,duplicates.duplicate=tableCells[i].textContent,tableCells[i].textContent.length>0&&checkForDefined(tableCells[i+1])&&duplicates.duplicate===tableCells[i+1].textContent&&!tableCells[i].getAttribute("style")?(duplicates.count++,tableCells[i].remove(),tableCells[i].style.gridColumn=countColumIncrease+1+"/span "+duplicates.count):duplicates.count=1}tableOutput.onclick=async e=>{if(await delay(300),clickType.double)return;const target=e.target;return"I"===target.tagName?(elementSelected.element=target,mainInput.classList.remove("hidden"),target.textContent.length&&(cellInput.value=target.textContent),target.className.length&&(cellClass.value=target.className),target.title.length&&(cellTitle.value=target.title),isChecked(inputClear)&&(cellInput.value=""),cellInput.focus(),cellInput.select(),void e.preventDefault()):void 0},tableOutput.ondblclick=async e=>{if("I"===e.target.tagName){e.preventDefault(),e.stopPropagation(),clickType.double=!0,await delay(340),clickType.double=!1;const classSelected=[c1,c2].map((e,i)=>isChecked(e)?"c"+i:"");e.target.className,classSelected.map(c=>!!c.length&&e.target.classList.toggle(c)).join(" ")}},document.addEventListener("click",e=>{const target=e.target;if(target.parentNode&&target.parentNode!==mainInside&&mainInput.classList.add("hidden"),target.parentElement&&target.parentElement.id||target.id){if("gaps"===target.parentElement.id)return void gaps();if("html-output-button"===target.id){const element=tableOutput.cloneNode(!0),elements=Array.from(element.childNodes);let css=[];elements.forEach((e,i)=>{e.getAttribute("style")&&(css.push(`.table i:nth-child(${i+1}){${e.getAttribute("style")}}`),e.removeAttribute("style"))});const style=element.getAttribute("style");element.removeAttribute("style"),htmlOutput.textContent=element.outerHTML;const defaultsStylingCell="\n          .table i{\n          box-shadow: 1px 1px 0 0 currentColor, 1px 1px 0 0 currentColor inset;\n          min-inline-size: 1.5em;\n          min-block-size: 1.5em;\n          position: relative;\n          font-size: inherit;\n          font-style: inherit;\n          line-height: inherit;\n          padding: 0 4px;\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          background: #fff;\n          }\n          .c0 {\n            background: #cde;\n          }\n\n          .c1 {\n            background: #fce;\n          }\n          ",beautify=`.table{${style}}${defaultsStylingCell}${css.join("")}`.replaceAll(";",";<br>"),beautify1=beautify.replaceAll("{","{<br>");cssOutput.innerHTML=beautify1.replaceAll("}","}<br>")}"merge-cells"===target.id&&merge(),target===textCenter&&isChecked(textCenter)?tableOutput.style.textAlign="center":isChecked(textCenter)||(tableOutput.style.textAlign="initial"),target===tableNumbersY&&isChecked(tableNumbersY)?numberingY(1):target!==tableNumbersY||isChecked(tableNumbersY)||numberingY(0),target===tableNumbersX&&isChecked(tableNumbersX)?numberingX(1,0):target!==tableNumbersX||isChecked(tableNumbersX)||numberingX(0,0),target===tableNumbers&&isChecked(tableNumbers)?numberingX(1,1):target!==tableNumbers||isChecked(tableNumbers)||numberingX(0,1);const rows=parseInt(d.getElementById("rows").value.replace(reg)),columns=parseInt(d.getElementById("columns").value.replace(reg));target===autoCell&&isChecked(autoCell)?(tableOutput.style.gridTemplateColumns="repeat("+columns+", 1fr)",tableOutput.style.gridTemplateRows="repeat("+rows+", 1fr)",tableOutput.style.maxWidth="initial"):target!==autoCell||isChecked(autoCell)||(tableOutput.style.gridTemplateColumns="repeat("+columns+", minmax(1em, auto))",tableOutput.style.gridTemplateRows="repeat("+rows+", minmax(1em, auto))",tableOutput.style.maxWidth="max-content")}}),document.addEventListener("DOMContentLoaded",()=>createTable())}(document);