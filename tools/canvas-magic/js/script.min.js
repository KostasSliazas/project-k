!function(){"use strict";const transparency=document.getElementById("transparency"),positions=document.getElementById("random"),size=document.getElementById("size"),clear=document.getElementById("clear"),delay=ms=>new Promise((resolve=>setTimeout(resolve,ms))),c=document.getElementById("myCanvas"),magicButton=document.getElementById("magic"),ctx=c.getContext("2d"),random=()=>Math.floor(Math.random()*+positions.value||1)+1;function MakeObjects(position1,position2,size,color,transparency){this.position1=position1,this.position2=position2,this.size=+size,this.color=color,this.transparency=+transparency,ctx.beginPath(),ctx.strokeStyle=this.color+function(alpha){const alpha255=Math.round(255*alpha);return alpha255.toString(16).padStart(2,"0")}(this.transparency),ctx.arc(this.position2,this.position1,this.size,0,this.size*Math.PI),ctx.stroke(),ctx.closePath()}function magicLoad(){const number=document.getElementById("number").value;for(let i=0;i<number;i++)new MakeObjects(random(),random(),size.value,(r=void 0,g=void 0,b=void 0,r=Math.floor(256*Math.random()),g=Math.floor(256*Math.random()),b=Math.floor(256*Math.random()),"#"+r.toString(16).padStart(2,"0")+g.toString(16).padStart(2,"0")+b.toString(16).padStart(2,"0")),transparency.value||1);var r,g,b}magicButton.addEventListener("click",magicLoad),clear.addEventListener("click",(function(){ctx.clearRect(0,0,c.width,c.height)})),document.addEventListener("DOMContentLoaded",magicLoad);const counters=document.getElementsByClassName("counter"),getElem=e=>e.getElementsByTagName("input")[0],removeTrailingZeros=number=>number.toString().replace(/(\.[0-9]*[1-9])0+$/,"$1"),counter={number:0,min:0,max:1e6,set numbers(number){number>Math.abs(this.max||number<this.min)||(this.number=number)},get numbers(){return this.number}},check=target=>{const targetVal=+target.value,targetMin=+target.min,targetMax=+target.max;isNaN(targetVal)||Math.max(targetMin||counter.min)>targetVal?target.value=+targetMin||counter.min:(Math.max(targetMax)||counter.max)<targetVal&&(target.value=+targetMax||counter.max),setItems(target.parentElement)};let bo=!1;const setItems=async e=>{bo||(bo=!0,e.classList.add("saved"),await delay(1e3),await(()=>{const array=[],length=counters.length;for(let i=0;i<length;i++)array.push(getElem(counters[i]).value);localStorage.setItem("CInputValues",array.join(","))})(),e.classList.remove("saved"),bo=!1)},hightLight=async e=>{e.classList.add("max"),await delay(200),e.classList.remove("max")},increase=e=>{const target=e.target;if("BUTTON"!==target.tagName)return;const currentTarget=e.currentTarget,input=getElem(currentTarget),step=parseFloat(input.step)||1;counter.numbers=parseFloat(input.value);const n1=counter.numbers.toString().split(".")[1],n2=step.toString().split(".")[1],len1=n1&&n1.length||0,len2=n2&&n2.length||0;"-"===target.textContent&&((+input.min||counter.min)<counter.numbers?input.value=counter.numbers=+removeTrailingZeros((+input.value-step).toFixed(len1+len2)):hightLight(target)),"+"===target.textContent&&((+input.max||counter.max)>counter.numbers?input.value=counter.numbers=+removeTrailingZeros((+input.value+step).toFixed(len1+len2)):hightLight(target)),check(getElem(target.parentElement))},inputChange=e=>check(e.target),values=localStorage.getItem("CInputValues")&&localStorage.getItem("CInputValues").split(",").map(Number),length=counters.length;for(let i=0;i<length;i++){const inputs=getElem(counters[i]);inputs.value=values&&values[i]||inputs.value||inputs.min||0,counters[i].addEventListener("click",increase),inputs.addEventListener("change",inputChange)}}();