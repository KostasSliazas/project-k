(function(e,c){function F(){const a=[];[...v.getElementsByTagName("INPUT")].forEach(b=>{b.checked&&a.push(b.value)});return a}function w(a){K.innerHTML=a||F().join(", ")}function n(a){a.style.display="none"===a.style.display?(x=!0,"block"):(x=!1,"none")}function y(){const a=c.getElementById("urls").value;if(0<a.length){let b;b=-1<a.indexOf("//")?a.split("/")[2]:a.split("/")[0];b=b.split(":")[0];b=b.split("?")[0];return{text:L.value,url:b,full:a,type:F()}}w("No URL defined");return!1}function p(){l.focus();
l.value="";h.innerHTML="";let a=0;for(var b=0;b<e.localStorage.length;b++){var d=e.localStorage.key(b);d=z(d);if(null!==d){const {full:f,text:g,type:k,url:m}=d;"undefined"!==typeof f&&(a++,G(m,k,g,f))}}0===a&&(h.innerHTML="No links added...");h.appendChild(A);b=e.localStorage.length;B.innerHTML=`${a}/${a<b?a:b}`}function C(){h.innerHTML="";let a=0;for(let d=0;d<e.localStorage.length;d++){var b=e.localStorage.key(d);b=z(b);if(null!==b){const {full:f,text:g,type:k,url:m}=b;"undefined"!==typeof f&&-1<
f.indexOf("http")&&k.concat(g.split(),m.split(),f.split()).map(r=>!!r.toLowerCase().includes(l.value.toLowerCase())).includes(!0)&&(a++,G(m,k,g,f))}}h.appendChild(A);B.innerHTML=`${a}/${e.localStorage.length}`;0===a&&(h.innerHTML="No results...")}function z(a){try{return JSON.parse(e.localStorage.getItem(a))}catch(b){return console.error("Error parsing JSON:",b),null}}function G(a,b,d,f){const g=c.createElement("a"),k=c.createElement("img");k.src="https://"+a+"/favicon.ico";k.onload=function(M){q.appendChild(M.target)};
k.onerror=function(){k.onerror=null;k.src="./favicon.ico";q.appendChild(k)};const m=c.createElement("span"),r=c.createElement("span"),q=c.createElement("span"),t=c.createElement("span");t.className="close";t.innerHTML="\u00d7";t.onclick=()=>{e.localStorage.removeItem(g.href);C();return!1};g.setAttribute("href",f);g.setAttribute("target","_blank");m.textContent=b;q.textContent=a;r.textContent=d;q.className="urls";g.appendChild(q);g.appendChild(r);g.appendChild(m);g.appendChild(t);A.appendChild(g)}
const v=c.getElementById("check-boxes"),D=c.getElementById("select"),K=c.getElementById("choises"),N=c.getElementById("create-link"),h=c.getElementById("outpus"),O=c.getElementById("exit"),P=c.getElementById("exit1"),Q=c.getElementById("open"),L=c.getElementById("aditions"),l=c.getElementById("site-search"),R=c.getElementById("copy-links"),S=c.getElementById("export-json"),u=c.getElementById("export-div"),H=c.getElementById("links"),B=c.getElementById("founded"),A=c.createDocumentFragment(),E=c.getElementsByName("check")[0],
I=c.getElementById("filter");let x=!1;E.checked=!1;I.checked=!1;E.addEventListener("input",()=>E.checked?h.classList.add("checks"):h.classList.remove("checks"));l.addEventListener("keydown",a=>{if("Enter"===a.key&&0<a.target.value.length)a.preventDefault(),C(),h.children.length&&h.firstElementChild.focus();else if("Backspace"===a.key&&0===a.target.value.length)B.innerHTML="",p();else return!1},!0);c.addEventListener("keydown",a=>{"Enter"===a.key||x||l.focus();return!1},!0);l.addEventListener("input",
a=>{0<=a.target.value.length&&C()});R.addEventListener("click",()=>{n(u)});const J=(()=>{const a=c.createElement("a");return(b,d)=>{b=JSON.stringify(b,null,2);b=e.URL.createObjectURL(new e.Blob([b],{type:"octet/stream"}));a.href=b;a.download=d;a.click();e.URL.revokeObjectURL(b)}})();N.addEventListener("click",()=>{try{if("localStorage"in e){if(y()){const a=JSON.stringify(y().full).slice(1,-1),b=JSON.stringify(y());e.localStorage.setItem(a,b)}}else e.alert("no localStorage in window")}catch(a){console.error("localStorage error:",
a)}p()});const T=()=>{const [...a]=h.getElementsByTagName("a");return a.map(b=>({text:b.children[1].innerText,url:b.children[0].innerText,g:b.href,type:[b.children[2].innerText]}))};S.addEventListener("click",()=>{var a=new Date;a=`localStorage${`${a.getUTCFullYear()}-${1<(a.getUTCMonth()+1).toString().length?a.getUTCMonth()+1:"0"+(a.getUTCMonth()+1)}-${1<a.getUTCDate().toString().length?a.getUTCDate():"0"+a.getUTCDate()}(${1<a.getHours().toString().length?a.getHours():"0"+a.getHours()}-${1<a.getMinutes().toString().length?
a.getMinutes():"0"+a.getMinutes()}-${1<a.getSeconds().toString().length?a.getSeconds():"0"+a.getSeconds()})`}.json`;if(I.checked)J(T(),`fil-${a}`);else{const b=[];for(let d=0;d<e.localStorage.length;d++)b.push(z(e.localStorage.key(d)));J(b,`all-${a}`)}n(u)});l.addEventListener("dblclick",p);c.addEventListener("click",function(a){"create-link"!==a.target.id&&("select"!==a.target.id||D.classList.contains("open")?"LABEL"!==a.target.tagName&&"INPUT"!==a.target.tagName&&(D.classList.remove("open"),v.style.display=
"none",w("")):(D.classList.add("open"),v.style.display="block"))});O.addEventListener("click",()=>n(u));P.addEventListener("click",()=>n(H));Q.addEventListener("click",()=>n(H));w("");p();c.getElementById("file-input").addEventListener("change",function(a){if(a=a.target.files[0]){var b=new e.FileReader;b.onload=d=>{try{const f=JSON.parse(d.target.result),g=f.length;for(d=0;d<g;d++)e.localStorage.setItem(f[d].full,JSON.stringify(f[d]));n(u);p()}catch(f){console.error("Error parsing JSON:",f)}};b.readAsText(a)}},
!1)})(window,document);
